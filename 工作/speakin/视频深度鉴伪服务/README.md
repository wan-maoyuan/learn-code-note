# deep-fake-detection（视频深度鉴伪）

### 目录结构

```
├── 3rd				----------------存放引擎、模型文件夹
|	├── bin			----------------引擎动态链接库
|	├── include		----------------引擎动态链接库的头文件
|	├── lib			----------------引擎静态链接库
│   └── models		----------------模型文件，配置文件
│
├── pkg				----------------项目源码文件
│   ├── config		----------------读取配置文件，将配置信息保存在内存中
│   ├── handler		----------------请求的后续处理
│   └── service	 	----------------http 服务路由配置，服务启动和关闭
│
├── videos			----------------存放视频文件
├── go.mod
├── logger.toml		----------------日志配置文件
├── service.yml		----------------项目配置文件
└── main.go     	----------------主程序
```



### 服务接口

- ```/v1/healz``` 引擎信息查询接口
- ```/v1/upload``` 视频文件上传接口
- ```/v1/result``` 视频文件鉴伪结果查询接口
- ```/v1/shutdown``` 服务关闭接口
- ```/v1/swagger/index.html``` ==swagger==页面文档查看接口



### 服务使用步骤

1. 先启动服务。
2. 请求 ```/v1/healz``` 接口，获取引擎的基础信息，获取成功，表明深度视频鉴伪功能可用。
3. 使用 ```/v1/upload``` 接口上传视频，可同时上传多个视频文件，上传成功之后会返回一个 ```task_id```。
4. 使用 ```task_id``` 请求```/v1/result```接口可以获取该任务当前的状态，如果任务执行完成，会返回鉴别的结果。
5. 如果想要关闭视频深度鉴伪服务，请求 ```/v1/shutdown``` 接口，可以将服务关闭。



```shell
go build -ldflags "-H windowsgui -s -w -X 'main.Version=v1.1.0' -X 'main.CommitHash=722afc739541a674dfee774f949ee51ff5abffc5' -X 'main.BuildTime=20210929180022'"
```

